<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>Lootr by vincent</title>
    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/pygment_trac.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
    <script src="javascripts/respond.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <!--[if lt IE 8]>
    <link rel="stylesheet" href="stylesheets/ie.css">
    <![endif]-->
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">

  </head>
  <body>
      <div id="header">
        <nav>
          <li class="fork"><a href="https://github.com/vincent/lootr">View On GitHub</a></li>
          <li class="downloads"><a href="https://github.com/vincent/lootr/zipball/master">ZIP</a></li>
          <li class="downloads"><a href="https://github.com/vincent/lootr/tarball/master">TAR</a></li>
          <li class="title">DOWNLOADS</li>
        </nav>
      </div><!-- end header -->

    <div class="wrapper">

      <section>
        <div id="title">
          <h1>Lootr</h1>
          <p>A simple rpg-like looting system</p>
          <hr>
          <span class="credits left">Project maintained by <a href="https://github.com/vincent">vincent</a></span>
          <span class="credits right">Hosted on GitHub Pages &mdash; Theme by <a href="https://twitter.com/michigangraham">mattgraham</a></span>
        </div>

<div id="readme" class="clearfix announce instapaper_body md">
    <span class="name">
      <span class="octicon octicon-book"></span>
      README.md
    </span>

    <article class="markdown-body entry-content" itemprop="mainContentOfPage"><h1>
<a name="user-content-lootr" class="anchor" href="#lootr" aria-hidden="true"><span class="octicon octicon-link"></span></a>Lootr</h1>

<p>A simple RPG-like looting system.</p>

<p>Heavily inspired from <a href="http://journal.stuffwithstuff.com/2014/07/05/dropping-loot">http://journal.stuffwithstuff.com/2014/07/05/dropping-loot</a></p>

<p><a href="vendor/otter-is-coming.jpg" target="_blank"><img src="vendor/otter-is-coming.jpg" alt="Lootr !" style="max-width:100%;"></a></p>

<h1>
<a name="user-content-adding-items" class="anchor" href="#adding-items" aria-hidden="true"><span class="octicon octicon-link"></span></a>Adding items</h1>

<p>Lootr is organized as a tree. Get a new instance with</p>

<div class="highlight highlight-javascript"><pre><span class="kd">var</span> <span class="nx">loot</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Lootr</span><span class="p">(</span><span class="s1">'/equipment'</span><span class="p">)</span>

<span class="nx">loot</span><span class="p">.</span><span class="nx">add</span><span class="p">({</span> <span class="nx">name</span><span class="o">:</span> <span class="s1">'Stuff'</span> <span class="p">})</span>
</pre></div>

<p>Each level is composed by a list of items in <code>loot.items</code> and nested branchs in <code>loot.branchs</code>.</p>

<p>Organize the loot repository by adding branchs</p>

<div class="highlight highlight-javascript"><pre><span class="nx">loot</span><span class="p">.</span><span class="nx">branch</span><span class="p">(</span><span class="s1">'weapons'</span><span class="p">)</span>
<span class="nx">loot</span><span class="p">.</span><span class="nx">branch</span><span class="p">(</span><span class="s1">'armor'</span><span class="p">)</span>
</pre></div>

<p>The <code>branch</code> method return itself, on which you can <code>add</code> items or add nested branchs.</p>

<div class="highlight highlight-javascript"><pre><span class="nx">loot</span><span class="p">.</span><span class="nx">branch</span><span class="p">(</span><span class="s1">'/equipment/weapons'</span><span class="p">)</span>
    <span class="p">.</span><span class="nx">add</span><span class="p">({</span> <span class="nx">name</span><span class="o">:</span> <span class="s1">'Pistol'</span> <span class="p">})</span>
    <span class="p">.</span><span class="nx">branch</span><span class="p">(</span><span class="s1">'automatic'</span><span class="p">)</span>
        <span class="p">.</span><span class="nx">add</span><span class="p">({</span> <span class="nx">name</span><span class="o">:</span> <span class="s1">'Uzi'</span> <span class="p">})</span>

<span class="nx">loot</span><span class="p">.</span><span class="nx">branch</span><span class="p">(</span><span class="s1">'/equipment/armor'</span><span class="p">)</span>
    <span class="p">.</span><span class="nx">add</span><span class="p">({</span> <span class="nx">name</span><span class="o">:</span> <span class="s1">'Plates'</span> <span class="p">})</span>
    <span class="p">.</span><span class="nx">add</span><span class="p">({</span> <span class="nx">name</span><span class="o">:</span> <span class="s1">'Leather'</span> <span class="p">})</span>
</pre></div>

<h1>
<a name="user-content-rollin" class="anchor" href="#rollin" aria-hidden="true"><span class="octicon octicon-link"></span></a>Rollin'</h1>

<p>Random-pick something at top level with <code>Lootr.roll( path, depth = 0, chance = 1 )</code></p>

<p>It will yield an item in the <code>path</code> branch or, if <code>depth</code> is given, in an up to <code>depth</code> deep branchs, if the depth-decreasing <code>chance</code> is greater than a <code>Math.random()</code></p>

<div class="highlight highlight-javascript"><pre><span class="c1">// Loot something from top level</span>
<span class="nx">loot</span><span class="p">.</span><span class="nx">roll</span><span class="p">(</span><span class="s1">'/equipment'</span><span class="p">)</span>                        <span class="c1">// only 'Stuff'</span>

<span class="c1">// Loot something from anywhere</span>
<span class="nx">loot</span><span class="p">.</span><span class="nx">roll</span><span class="p">(</span><span class="s1">'/equipment'</span><span class="p">,</span> <span class="kc">Infinity</span><span class="p">,</span> <span class="kc">Infinity</span><span class="p">)</span>    <span class="c1">// any item</span>

<span class="c1">// Loot an armor</span>
<span class="nx">loot</span><span class="p">.</span><span class="nx">roll</span><span class="p">(</span><span class="s1">'/equipment/armor'</span><span class="p">)</span>                  <span class="c1">// one of [ 'Plates', 'Leather' ]</span>

<span class="c1">// Loot a weapon</span>
<span class="nx">loot</span><span class="p">.</span><span class="nx">roll</span><span class="p">(</span><span class="s1">'/equipment/weapons'</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>             <span class="c1">// one of [ 'Pistol', 'Uzi' ]</span>

</pre></div>

<h1>
<a name="user-content-lootin" class="anchor" href="#lootin" aria-hidden="true"><span class="octicon octicon-link"></span></a>Lootin'</h1>

<div class="highlight highlight-javascript"><pre><span class="nx">deadMonster</span><span class="p">.</span><span class="nx">drops</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">{</span><span class="nx">from</span><span class="o">:</span> <span class="s1">'/equipment'</span><span class="p">,</span>         <span class="nx">luck</span><span class="o">:</span><span class="mf">1.0</span><span class="p">,</span> <span class="nx">stack</span><span class="o">:</span><span class="mi">1</span> <span class="p">},</span>
    <span class="p">{</span><span class="nx">from</span><span class="o">:</span> <span class="s1">'/equipment/armor'</span><span class="p">,</span>   <span class="nx">luck</span><span class="o">:</span><span class="mf">0.5</span><span class="p">,</span> <span class="nx">stack</span><span class="o">:</span><span class="mi">2</span> <span class="p">},</span>
    <span class="p">{</span><span class="nx">from</span><span class="o">:</span> <span class="s1">'/equipment/weapons'</span><span class="p">,</span> <span class="nx">luck</span><span class="o">:</span><span class="mf">0.8</span><span class="p">,</span> <span class="nx">stack</span><span class="o">:</span><span class="mi">2</span> <span class="p">}</span>
<span class="p">]</span>

<span class="c1">// Loot your reward from a dead monster</span>
<span class="kd">var</span> <span class="nx">rewards</span> <span class="o">=</span> <span class="nx">loot</span><span class="p">.</span><span class="nx">loot</span><span class="p">(</span><span class="nx">deadMonster</span><span class="p">.</span><span class="nx">drops</span><span class="p">)</span>

<span class="nx">rewards</span> <span class="o">=</span> <span class="p">[</span> <span class="p">{</span><span class="nx">name</span><span class="o">:</span><span class="s1">'Stuff'</span><span class="p">},</span> <span class="p">{</span><span class="nx">name</span><span class="o">:</span><span class="s1">'Plates'</span><span class="p">},</span> <span class="p">{</span><span class="nx">name</span><span class="o">:</span><span class="s1">'Uzi'</span><span class="p">},</span> <span class="p">{</span><span class="nx">name</span><span class="o">:</span><span class="s1">'Uzi'</span><span class="p">}</span> <span class="p">]</span>
</pre></div>

<h1>
<a name="user-content-modifiers" class="anchor" href="#modifiers" aria-hidden="true"><span class="octicon octicon-link"></span></a>Modifiers</h1>

<p>The library includes a basic modifiers system.</p>

<p>Add some modifiers to affect the name of each looted item with <code>addNameModifiers</code>. They will be used as simple suffixes. Or, if they contain a <code>$property</code>, each property name will be replaced.</p>

<div class="highlight highlight-javascript"><pre><span class="nx">loot</span><span class="p">.</span><span class="nx">add</span><span class="p">({</span> <span class="nx">name</span><span class="o">:</span> <span class="s1">'Staff'</span><span class="p">,</span> <span class="nx">color</span><span class="o">:</span> <span class="s1">'golden'</span> <span class="p">})</span>
<span class="nx">loot</span><span class="p">.</span><span class="nx">addNameModifiers</span><span class="p">([</span> <span class="s1">'from the shadows'</span><span class="p">,</span> <span class="s1">'A $color $name from the gods'</span> <span class="p">])</span>
</pre></div>

<p>Then, at loot time:</p>

<div class="highlight highlight-javascript"><pre><span class="nx">deadMonster</span><span class="p">.</span><span class="nx">drops</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">{</span><span class="nx">from</span><span class="o">:</span> <span class="s1">'/equipment'</span><span class="p">,</span> <span class="nx">stack</span><span class="o">:</span><span class="mi">2</span><span class="p">,</span> <span class="nx">modify</span><span class="o">:</span><span class="p">{</span><span class="nx">name</span><span class="o">:</span><span class="kc">true</span><span class="p">}</span> <span class="p">}</span>
<span class="p">]</span>

<span class="c1">// Loot your reward from a dead monster</span>
<span class="kd">var</span> <span class="nx">rewards</span> <span class="o">=</span> <span class="nx">loot</span><span class="p">.</span><span class="nx">loot</span><span class="p">(</span><span class="nx">deadMonster</span><span class="p">.</span><span class="nx">drops</span><span class="p">)</span>

<span class="nx">rewards</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">{</span><span class="nx">name</span><span class="o">:</span><span class="s1">'Staff from the shadows'</span><span class="p">},</span>
    <span class="p">{</span><span class="nx">name</span><span class="o">:</span><span class="s1">'A golden staff from the gods'</span><span class="p">}</span>
<span class="p">]</span>
</pre></div>

<h1>
<a name="user-content-tests" class="anchor" href="#tests" aria-hidden="true"><span class="octicon octicon-link"></span></a>Tests</h1>

<p>A simple test suite is available <a href="http://vincent.github.io/lootr/test.html">here</a></p>

<p>It also works with <code>npm test</code></p></article>
  </div>
      </section>

    </div>
    <!--[if !IE]><script>fixScale(document);</script><![endif]-->
              <script type="text/javascript">
            var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
            document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
          </script>
          <script type="text/javascript">
            try {
              var pageTracker = _gat._getTracker("UA-43950137-3");
            pageTracker._trackPageview();
            } catch(err) {}
          </script>

  </body>
</html>
